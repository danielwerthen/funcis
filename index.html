---
layout: default
title: Func.is by Daniel Werth√©n
---
        <h1>Func.is</h1>

<p>In short, <strong>Func.is</strong> is about simplicity.  It's main ambition is to make app to app communication dead simple.</p>

<p>The idea is, to expose a certain set of functions in each distinct app, or <em>node</em>, and allow scripts to define flows of information between these functions.  What the framework does, in essence, is to execute and pass along the results of these functions.</p>

<h1>Installation</h1>

<p>Given that you have a nice enough version of Node and Npm
Install via npm:</p>

<pre><code>$ npm install funcis
</code></pre>

<h1>Usage</h1>

<p>A <em>app.js</em> file:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">funcis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'funcis'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">funcis</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">node</span><span class="p">(</span><span class="s1">'Node'</span><span class="p">);</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">functions</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'Add'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="nx">arg1</span> <span class="o">+</span> <span class="nx">arg2</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">functions</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'Print'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">script</span><span class="p">(</span><span class="s1">'addition'</span><span class="p">);</span>
</pre></div>

<p>A <em>addition.is</em> file: ('.is' is the default extension to script files)</p>

<pre><code>Node.Add(5, 5)
    (res) =&gt;
        Node.Print(res)
</code></pre>

<p>Let's extend this with a second <em>node</em> in another app.
<em>NodeA.js</em>:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">funcis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'funcis'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">funcis</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">nodea</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">node</span><span class="p">(</span><span class="s1">'NodeA'</span><span class="p">);</span>
<span class="nx">nodea</span><span class="p">.</span><span class="nx">functions</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'Add'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cb</span><span class="p">(</span><span class="nx">arg1</span> <span class="o">+</span> <span class="nx">arg2</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">()).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">5001</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">nodeb</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">'localhost'</span><span class="p">,</span> <span class="nx">port</span><span class="o">:</span> <span class="mi">5000</span> <span class="p">});</span>
<span class="nx">nodeb</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'NodeB'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">script</span><span class="p">(</span><span class="s1">'addition'</span><span class="p">);</span>


</pre></div>

<p><em>NodeB.js</em>:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">funcis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'funcis'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">funcis</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">nodeb</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">node</span><span class="p">(</span><span class="s1">'NodeB'</span><span class="p">);</span>
<span class="nx">nodeb</span><span class="p">.</span><span class="nx">functions</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'Print'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">()).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">nodea</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">'localhost'</span><span class="p">,</span> <span class="nx">port</span><span class="o">:</span> <span class="mi">5001</span> <span class="p">});</span>
<span class="nx">nodea</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'NodeA'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">script</span><span class="p">(</span><span class="s1">'addition'</span><span class="p">);</span>
</pre></div>

<p>We also need to update <em>addition.is</em>:</p>

<pre><code>NodeA.Add(5,5)
    (res)
        NodeB.Print(res)
</code></pre>

<h1>Scripting</h1>

<p>The current script syntax is heavily influenced by Javascript with a little bit of lambda dashed onto it.</p>

<pre><code>Node.Function(arg1, arg2)
    (err, res) =&gt;
        Node.Function(err, res)
</code></pre>

<p>If a function returns nothing the second argument definition may be omitted.</p>

<pre><code>Node.Function(arg1)
    Node.Function(arg2)
</code></pre>

<p>Except for passing argument references like <code>arg1</code> one can also pass constant json objects, array, strings and number.</p>

<pre><code>Node.Function("Number", 35, "Array", [ 12, 24, 35 ], "And objects", { key: "value" })
</code></pre>

<p>We can also define constants and give them a name, which allows for easy reuse.</p>

<pre><code>let pi = 3.14159265358979323846264338327950

Node.Calc(5, pi)
    (res) =&gt;
        Node.Equal(res, pi)
</code></pre>

<p>It is also possible to declare function chains this way, or <em>continuations</em>.</p>

<pre><code>let Join = (err, res)
    Node.Match(err, res)
        (OK) =&gt;
            Node.Report(OK, res)

Node.Request()
    (data) =&gt;
        Node.Split(data)
            (err, item) =&gt;
                Join(err, item)
        Node.Split(data)
            (err, item) =&gt;
                Join(err, item)
</code></pre>

<p>This is practically the same thing as if the <code>Join</code> <em>continuation</em> would have been written in place, however repeated.</p>

<p>The part in front of the function name is called the <em>selector</em> and is used to resolve the affected nodes.  In the examples above it is simply a <em>node</em> name.  The <em>node</em> name is supposedly unique, but there can also be one or more <em>class</em> names inherit to a <em>node</em>.  This kind of <em>selector</em> is signified with a <code>.</code>.</p>

<pre><code>.Class.Func1()
</code></pre>

<p>Several <em>class</em> names may be combined to specify the <em>node</em> query.  </p>

<pre><code>.ClassA.ClassB.Func()
</code></pre>

<p>The <code>!</code> character signifies that a specific <em>class</em> name should be omitted.</p>

<pre><code>.IncludeClassA!ExcludeClassB.Func()
</code></pre>

<p>If the selector resolves into several <em>nodes</em> the function call will be executed in each and every one of these <em>nodes</em> concurrently.</p>
